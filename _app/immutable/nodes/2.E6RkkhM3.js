var ss=Object.defineProperty;var ns=(t,e,l)=>e in t?ss(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var Be=(t,e,l)=>(ns(t,typeof e!="symbol"?e+"":e,l),l);import{A as k,s as we,f as p,a as y,g as _,h as P,y as be,c as C,d as b,j as m,i as A,B as f,z as V,C as L,l as M,m as R,D as ne,E as x,F as qt,G as dt,H as ls,I as Bt,J as pt,K as as,e as ve,n as K,L as _e,M as nt,N as Ee,b as rs,p as os,o as cs}from"../chunks/scheduler.BXUoaqq0.js";import{S as ye,i as Ce,a as B,g as Ze,c as xe,t as U,b as Oe,d as $e,m as Ae,e as je,f as ke,h as wt}from"../chunks/index.Dc3hJP2P.js";import{r as We,d as re,w as N}from"../chunks/index.dccUVMPl.js";import{b as le}from"../chunks/paths.BPg5AUxb.js";function ae(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}class is{constructor(){Be(this,"isBomb",!1);Be(this,"adjacentBombs",0);Be(this,"clicked",!1);Be(this,"flagged",!1)}}const us=We({major:0,minor:5,build:0,class:"Version"});We({0:"Disabled",1:"Enabled",2:"Goal",6:"Auto",7:"Enabled + Auto"});const mt=N(null),Et=N(null),Yt=N(null),yt=N([]),fs=re(yt,t=>{let e={};return t==null||t.forEach(l=>e[l.slot]=l.name),e}),zt=N({}),Kt=N({}),ds=N({}),ms=We(38281),Se=N(null),ht=N(!1),gt=N(null),_t=N([]),hs=We(10),et=N(!1),bt=N(0),Ve=N(null),Qe=N(null),Le=N([]),De=N([]),gs=We({CLIENT_UNKNOWN:0,CLIENT_READY:10,CLIENT_PLAYING:20,CLIENT_GOAL:30}),J=N([]),Te=N(""),Me=N(5),Re=N(5),Ge=N(5);let fe=N(5),de=N(5),lt=N(5),Ue=N(0),ue=N(!1),Q=N([]),Vt=re([Le],([t])=>t.length),ps=re([De],([t])=>t.length);const Qt=re([Vt,ps,lt,de,fe],([t,e,l,s,o])=>Math.max(Math.min(l+o+s-10-t,e),0)),Ct=re([Q],([t])=>t.flatMap(e=>e)),_s=re([Ct],([t])=>t.filter(e=>e.flagged).length),bs=re([de,fe,Ct],([t,e,l])=>t*e-l.filter(s=>s.clicked).length),Xt=re([Ue,bs,Ct],([t,e,l])=>t===e&&!l.some(s=>s.clicked&&s.isBomb)),vt=N(!1);let Zt=null,Xe=1,kt=10,v=null,Nt={},xt=!1;Le.subscribe(t=>t);De.subscribe(t=>t);Et.subscribe(t=>Zt=t);Yt.subscribe(t=>t);yt.subscribe(t=>t);bt.subscribe(t=>Xe=t);Se.subscribe(t=>v=t);J.subscribe(t=>t);_t.subscribe(t=>t);hs.subscribe(t=>kt=t);fs.subscribe(t=>Nt=t);Te.subscribe(t=>t);ue.subscribe(t=>xt=t);function vs(t){if(t){const e=k(Vt);k(Qt)?Ps(81e3+e):k(Xt)&&Bs()}}function se(t,e){const l=k(Q);0<=t&&t<k(de)&&0<=e&&e<k(fe)&&l[e][t].isBomb!==!0&&(l[e][t].adjacentBombs+=1)}function ks(t,e,l){l===0&&Z(t,e,!1),l===2&&Ss(t,e),Q.update(s=>s)}function Ss(t,e){const l=k(Q);if(0<=t&&t<k(de)&&0<=e&&e<k(fe)&&!l[e][t].clicked){let s=l[e][t];s.flagged=!s.flagged,l[e][t]=s}}async function Z(t,e,l=!0){const s=k(Q);if(0<=t&&t<k(de)&&0<=e&&e<k(fe)&&!s[e][t].clicked&&!s[e][t].flagged){let o=s[e][t];o.clicked=!0,k(Ue)===0&&(ue.set(!0),Es({x:t,y:e})),!o.isBomb&&o.adjacentBombs==0&&(Z(t-1,e-1),Z(t,e-1),Z(t+1,e-1),Z(t-1,e),Z(t+1,e),Z(t-1,e+1),Z(t,e+1),Z(t+1,e+1)),o.isBomb&&(St(),Ts(),setTimeout(()=>{ue.set(!1),tt()},2500)),s[e][t]=o}k(Xt)&&(St(),vs(!0),setTimeout(()=>{ue.set(!1),tt()},2500))}function St(){const t=k(Q);t.forEach((e,l)=>{e.forEach((s,o)=>{s.clicked=!0,t[l][o]=s})})}function tt(){if(!k(ue)){Ue.set(0);const t=k(Me),e=k(Re),l=k(Ge);lt.set(t),de.set(e),fe.set(l),Q.set(Array.from({length:l},()=>Array.from({length:e},()=>new is)))}}function ws(t,e,l){return t.x>=e-1&&t.x<=e+1&&t.y>=l-1&&t.y<=l+1}function Es(t){const e=k(Me),l=k(Re),s=k(Ge),o=k(Q);for(;k(Ue)<k(lt);){const n=Math.round(Math.random()*l*e)%l,r=Math.round(Math.random()*s*e)%s;if(ws(t,n,r))continue;const a=o[r][n];a.isBomb!==!0&&(se(n-1,r-1),se(n,r-1),se(n+1,r-1),se(n-1,r),a.isBomb=!0,se(n+1,r),se(n-1,r+1),se(n,r+1),se(n+1,r+1),Ue.update(c=>c+1))}}function ys(){St(),setTimeout(()=>{ue.set(!1),tt()},2500),Q.update(t=>t)}const es=async(t,e,l)=>{if((v==null?void 0:v.readyState)===WebSocket.OPEN&&(v.close(),Se.set(null)),!t||!e)return;ht.set(!1);let s=t;s.search(/^\/connect /)>-1&&(s=s.substring(9)),s.search(/:\d+$/)===-1&&(s=`${s}:${k(ms)}`);const o=/^ws:\/\//.test(s)?"ws":"wss";s=s.replace(/^.*\/\//,""),gt.set(l??null),_t.set([]),Se.set(new WebSocket(`${o}://${s}`)),v&&(v.onopen=()=>{},v.onmessage=n=>{const r=JSON.parse(n.data);for(const a of r)switch(a.cmd){case"RoomInfo":!localStorage.getItem("dataPackageVersion")||!localStorage.getItem("dataPackage")||a.datapackage_version!==localStorage.getItem("dataPackageVersion")?Ns():Tt(JSON.parse(localStorage.getItem("dataPackage")||"")),mt.set(e),v==null||v.send(JSON.stringify([{cmd:"Connect",game:"ChecksFinder",name:k(mt),uuid:Cs(),tags:["AP","DeathLink"],password:k(gt),version:k(us),items_handling:7,slot_data:!0}]));break;case"Connected":bt.set(0),Le.set(a.checked_locations),De.set(a.missing_locations),_t.set([]),Me.set(5),Ge.set(5),Re.set(5),Te.set("Connected"),yt.set(a.players),Yt.set(a.team),Et.set(a.slot);break;case"ConnectionRefused":Te.set("Not Connected"),v&&v.readyState===WebSocket.OPEN&&(a.errors.includes("InvalidPassword")?J.update(c=>[...c,gt===null?"This server requires a password. Please use /connect [server] [password] to connect.":"Your provided password is incorrect. Please try again."]):J.update(c=>[...c,`Error while connecting to AP server: ${a.errors.join(", ")}.`]),ht.set(!0),v==null||v.close());break;case"ReceivedItems":a.items.forEach(c=>{switch(c.item){case 8e4:Re.update(i=>i+1);break;case 80001:Ge.update(i=>i+1);break;case 80002:Me.update(i=>i+1);break}});break;case"RoomUpdate":break;case"Print":J.update(c=>[...c,a.text]);break;case"PrintJSON":switch(a.type){case"ItemSend":J.update(c=>[...c,Os(a.data)]);break;default:J.update(c=>[...c,...a.data]);break}break;case"DataPackage":a.data.version!==0&&(localStorage.setItem("dataPackageVersion",a.data.version),localStorage.setItem("dataPackage",JSON.stringify(a.data))),Tt(a.data);break;case"Bounced":a.tags.includes("DeathLink")&&a.data.source!==k(mt)&&xt&&ys(),J.update(c=>[...c,a.data.source+" "+a.data.cause]);break}},v.onclose=()=>{Te.set("Not Connected");const n=k(Qe);et||!n||(Ve&&(window.clearTimeout(k(Ve)??0),Ve.set(null)),Ve.set(window.setTimeout(()=>{if((v==null?void 0:v.readyState)!==WebSocket.OPEN&&!k(ht)&&!k(et)){if(bt.set(Xe+1),Xe>kt){J.update(r=>[...r,"Archipelago server connection lost. The connection closed unexpectedly. Please try to reconnect, or restart the client."]);return}J.update(r=>[...r,`Connection to AP server lost. Attempting to reconnect (${Xe} of ${kt})`]),es(t)}},5e3)))},v.onerror=()=>{(v==null?void 0:v.readyState)===WebSocket.OPEN&&(J.update(n=>[...n,"Archipelago server connection lost. The connection closed unexpectedly. Please try to reconnect, or restart the client."]),v.close())})},Cs=()=>{let t=localStorage.getItem("clientId");return t||(t=(Math.random()*1e16).toString(),localStorage.setItem("clientId",t)),t},Ns=()=>{!v||v.readyState!==WebSocket.OPEN||v.send(JSON.stringify([{cmd:"GetDataPackage"}]))},Is=t=>{(v==null?void 0:v.readyState)===WebSocket.OPEN&&v.send(JSON.stringify([{cmd:"Say",text:t}]))},Ps=t=>{let e=k(Le);e.push(t),Le.set(e);let l=k(De);l.shift(),De.set(l),v==null||v.send(JSON.stringify([{cmd:"LocationChecks",locations:[t]}]))},Bs=()=>{v==null||v.send(JSON.stringify([{cmd:"StatusUpdate",status:k(gs).CLIENT_GOAL}]))},Ts=()=>{v==null||v.send(JSON.stringify([{cmd:"Bounce",tags:["DeathLink"],data:{time:Date.now(),source:Nt[Zt||0],cause:"blew it"}}]))},Tt=t=>{let e={},l={};Object.values(t.games).forEach(s=>{Object.keys(s.item_name_to_id).forEach(o=>{e[s.item_name_to_id[o]]=o}),Object.keys(s.location_name_to_id).forEach(o=>{l[s.location_name_to_id[o]]=o})}),zt.set(e),Kt.set(l),ds.set(t.games.ChecksFinder.location_name_to_id)},Os=t=>{const e=k(zt),l=k(Kt);return t.map(s=>{switch(s.type){case"player_id":return Nt[parseInt(s.text)];case"item_id":return e[+s.text];case"location_id":return l[+s.text];default:return s.text}}).join("")};function Ot(t){let e,l,s,o="Server address:",n,r,a,c,i,u="Player name:",S,d,g,h,w,E="Password:",I,D,W,q,me=Se?"Connect":"Disconnect",G,ee,he;return{c(){e=p("form"),l=p("div"),s=p("label"),s.textContent=o,n=y(),r=p("input"),a=y(),c=p("div"),i=p("label"),i.textContent=u,S=y(),d=p("input"),g=y(),h=p("div"),w=p("label"),w.textContent=E,I=y(),D=p("input"),W=y(),q=p("button"),G=M(me),this.h()},l($){e=_($,"FORM",{class:!0});var O=P(e);l=_(O,"DIV",{class:!0});var te=P(l);s=_(te,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),be(s)!=="svelte-1x6qc9h"&&(s.textContent=o),n=C(te),r=_(te,"INPUT",{name:!0,id:!0,class:!0}),te.forEach(b),a=C(O),c=_(O,"DIV",{class:!0});var H=P(c);i=_(H,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),be(i)!=="svelte-7ul9v9"&&(i.textContent=u),S=C(H),d=_(H,"INPUT",{name:!0,id:!0,class:!0}),H.forEach(b),g=C(O),h=_(O,"DIV",{class:!0});var oe=P(h);w=_(oe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),be(w)!=="svelte-bhu94"&&(w.textContent=E),I=C(oe),D=_(oe,"INPUT",{name:!0,id:!0,class:!0}),oe.forEach(b),W=C(O),q=_(O,"BUTTON",{class:!0});var ge=P(q);G=R(ge,me),ge.forEach(b),O.forEach(b),this.h()},h(){m(s,"for","address"),m(s,"class","svelte-grff0s"),m(r,"name","address"),m(r,"id","server-address"),m(r,"class","svelte-grff0s"),m(l,"class","svelte-grff0s"),m(i,"for","player"),m(i,"class","svelte-grff0s"),m(d,"name","player"),m(d,"id","player"),m(d,"class","svelte-grff0s"),m(c,"class","svelte-grff0s"),m(w,"for","password"),m(w,"class","svelte-grff0s"),m(D,"name","password"),m(D,"id","password"),m(D,"class","svelte-grff0s"),m(h,"class","svelte-grff0s"),m(q,"class","svelte-grff0s"),m(e,"class","svelte-grff0s")},m($,O){A($,e,O),f(e,l),f(l,s),f(l,n),f(l,r),ne(r,t[0]),f(e,a),f(e,c),f(c,i),f(c,S),f(c,d),ne(d,t[1]),f(e,g),f(e,h),f(h,w),f(h,I),f(h,D),ne(D,t[2]),f(e,W),f(e,q),f(q,G),ee||(he=[x(r,"input",t[5]),x(d,"input",t[6]),x(D,"input",t[7]),x(q,"click",t[4])],ee=!0)},p($,O){O&1&&r.value!==$[0]&&ne(r,$[0]),O&2&&d.value!==$[1]&&ne(d,$[1]),O&4&&D.value!==$[2]&&ne(D,$[2])},d($){$&&b(e),ee=!1,qt(he)}}}function $s(t){let e,l,s="Digging Game",o,n=t[3]!=="Connected"&&Ot(t);return{c(){e=p("section"),l=p("h1"),l.textContent=s,o=y(),n&&n.c(),this.h()},l(r){e=_(r,"SECTION",{class:!0});var a=P(e);l=_(a,"H1",{class:!0,"data-svelte-h":!0}),be(l)!=="svelte-584zkb"&&(l.textContent=s),o=C(a),n&&n.l(a),a.forEach(b),this.h()},h(){m(l,"class","svelte-grff0s"),m(e,"class","svelte-grff0s")},m(r,a){A(r,e,a),f(e,l),f(e,o),n&&n.m(e,null)},p(r,[a]){r[3]!=="Connected"?n?n.p(r,a):(n=Ot(r),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:V,o:V,d(r){r&&b(e),n&&n.d()}}}function As(t,e,l){let s,o,n,r;L(t,Se,h=>l(8,s=h)),L(t,Qe,h=>l(9,o=h)),L(t,et,h=>l(10,n=h)),L(t,Te,h=>l(3,r=h));let a=k(Qe),c=k(Et),i="";async function u(h){if(!a){dt(et,n=!0,n),dt(Qe,o=null,o),s&&s.readyState===WebSocket.OPEN&&(s.close(),dt(Se,s=null,s));return}await es(a,c,i)}function S(){a=this.value,l(0,a)}function d(){c=this.value,l(1,c)}function g(){i=this.value,l(2,i)}return[a,c,i,r,u,S,d,g]}class js extends ye{constructor(e){super(),Ce(this,e,As,$s,we,{})}}function ts(t){const e=t-1;return e*e*e+1}function st(t){return t/=.5,t<1?.5*t*t:(t--,-.5*(t*(t-2)-1))}function He(t,{delay:e=0,duration:l=400,easing:s=ls}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:l,easing:s,css:n=>`opacity: ${n*o}`}}function $t(t,{delay:e=0,duration:l=400,easing:s=ts,x:o=0,y:n=0,opacity:r=0}={}){const a=getComputedStyle(t),c=+a.opacity,i=a.transform==="none"?"":a.transform,u=c*(1-r),[S,d]=Bt(o),[g,h]=Bt(n);return{delay:e,duration:l,easing:s,css:(w,E)=>`
			transform: ${i} translate(${(1-w)*S}${d}, ${(1-w)*g}${h});
			opacity: ${c-u*E}`}}function At(t,{delay:e=0,duration:l=400,easing:s=ts,axis:o="y"}={}){const n=getComputedStyle(t),r=+n.opacity,a=o==="y"?"height":"width",c=parseFloat(n[a]),i=o==="y"?["top","bottom"]:["left","right"],u=i.map(I=>`${I[0].toUpperCase()}${I.slice(1)}`),S=parseFloat(n[`padding${u[0]}`]),d=parseFloat(n[`padding${u[1]}`]),g=parseFloat(n[`margin${u[0]}`]),h=parseFloat(n[`margin${u[1]}`]),w=parseFloat(n[`border${u[0]}Width`]),E=parseFloat(n[`border${u[1]}Width`]);return{delay:e,duration:l,easing:s,css:I=>`overflow: hidden;opacity: ${Math.min(I*20,1)*r};${a}: ${I*c}px;padding-${i[0]}: ${I*S}px;padding-${i[1]}: ${I*d}px;margin-${i[0]}: ${I*g}px;margin-${i[1]}: ${I*h}px;border-${i[0]}-width: ${I*w}px;border-${i[1]}-width: ${I*E}px;`}}function jt(t){let e;function l(n,r){if(n[2]===!0)return Ds;if(n[3]>0)return Ls}let s=l(t),o=s&&s(t);return{c(){o&&o.c(),e=ve()},l(n){o&&o.l(n),e=ve()},m(n,r){o&&o.m(n,r),A(n,e,r)},p(n,r){s===(s=l(n))&&o?o.p(n,r):(o&&o.d(1),o=s&&s(n),o&&(o.c(),o.m(e.parentNode,e)))},d(n){n&&b(e),o&&o.d(n)}}}function Ls(t){let e;return{c(){e=M(t[3])},l(l){e=R(l,t[3])},m(l,s){A(l,e,s)},p(l,s){s&8&&K(e,l[3])},d(l){l&&b(e)}}}function Ds(t){let e,l;return{c(){e=p("img"),this.h()},l(s){e=_(s,"IMG",{alt:!0,src:!0}),this.h()},h(){m(e,"alt","bomb"),_e(e.src,l=le+"/bomb-large.png")||m(e,"src",l)},m(s,o){A(s,e,o)},p:V,d(s){s&&b(e)}}}function Ms(t){let e,l,s,o,n=t[0]&&jt(t);return{c(){e=p("td"),n&&n.c(),this.h()},l(r){e=_(r,"TD",{class:!0});var a=P(e);n&&n.l(a),a.forEach(b),this.h()},h(){m(e,"class",l=pt(t[0]?"dug":t[1]?"flag":"")+" svelte-10n1hly")},m(r,a){A(r,e,a),n&&n.m(e,null),s||(o=x(e,"mousedown",t[5]),s=!0)},p(r,[a]){r[0]?n?n.p(r,a):(n=jt(r),n.c(),n.m(e,null)):n&&(n.d(1),n=null),a&3&&l!==(l=pt(r[0]?"dug":r[1]?"flag":"")+" svelte-10n1hly")&&m(e,"class",l)},i:V,o:V,d(r){r&&b(e),n&&n.d(),s=!1,o()}}}function Rs(t,e,l){const s=as();let{clicked:o=!1}=e,{flagged:n=!1}=e,{isBomb:r=!1}=e,{adjacentBombs:a=0}=e;function c(u){s("tile-clicked",u.button)}const i=u=>c(u);return t.$$set=u=>{"clicked"in u&&l(0,o=u.clicked),"flagged"in u&&l(1,n=u.flagged),"isBomb"in u&&l(2,r=u.isBomb),"adjacentBombs"in u&&l(3,a=u.adjacentBombs)},[o,n,r,a,c,i]}class Gs extends ye{constructor(e){super(),Ce(this,e,Rs,Ms,we,{clicked:0,flagged:1,isBomb:2,adjacentBombs:3})}}function Lt(t,e,l){const s=t.slice();return s[2]=e[l],s[4]=l,s}function Dt(t,e,l){const s=t.slice();return s[5]=e[l],s[7]=l,s}function Mt(t){let e,l;function s(...o){return t[1](t[7],t[4],...o)}return e=new Gs({props:{clicked:t[0][t[4]][t[7]].clicked,flagged:t[0][t[4]][t[7]].flagged,isBomb:t[0][t[4]][t[7]].isBomb,adjacentBombs:t[0][t[4]][t[7]].adjacentBombs}}),e.$on("tile-clicked",s),{c(){Oe(e.$$.fragment)},l(o){$e(e.$$.fragment,o)},m(o,n){Ae(e,o,n),l=!0},p(o,n){t=o;const r={};n&1&&(r.clicked=t[0][t[4]][t[7]].clicked),n&1&&(r.flagged=t[0][t[4]][t[7]].flagged),n&1&&(r.isBomb=t[0][t[4]][t[7]].isBomb),n&1&&(r.adjacentBombs=t[0][t[4]][t[7]].adjacentBombs),e.$set(r)},i(o){l||(B(e.$$.fragment,o),l=!0)},o(o){U(e.$$.fragment,o),l=!1},d(o){je(e,o)}}}function Rt(t){let e,l,s,o=ae(t[2]),n=[];for(let a=0;a<o.length;a+=1)n[a]=Mt(Dt(t,o,a));const r=a=>U(n[a],1,1,()=>{n[a]=null});return{c(){e=p("tr");for(let a=0;a<n.length;a+=1)n[a].c();l=y(),this.h()},l(a){e=_(a,"TR",{class:!0});var c=P(e);for(let i=0;i<n.length;i+=1)n[i].l(c);l=C(c),c.forEach(b),this.h()},h(){m(e,"class","rows svelte-4jsriw")},m(a,c){A(a,e,c);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);f(e,l),s=!0},p(a,c){if(c&1){o=ae(a[2]);let i;for(i=0;i<o.length;i+=1){const u=Dt(a,o,i);n[i]?(n[i].p(u,c),B(n[i],1)):(n[i]=Mt(u),n[i].c(),B(n[i],1),n[i].m(e,l))}for(Ze(),i=o.length;i<n.length;i+=1)r(i);xe()}},i(a){if(!s){for(let c=0;c<o.length;c+=1)B(n[c]);s=!0}},o(a){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)U(n[c]);s=!1},d(a){a&&b(e),nt(n,a)}}}function Us(t){let e,l,s,o=ae(t[0]),n=[];for(let a=0;a<o.length;a+=1)n[a]=Rt(Lt(t,o,a));const r=a=>U(n[a],1,1,()=>{n[a]=null});return{c(){e=p("table"),l=p("tbody");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=_(a,"TABLE",{class:!0});var c=P(e);l=_(c,"TBODY",{class:!0});var i=P(l);for(let u=0;u<n.length;u+=1)n[u].l(i);i.forEach(b),c.forEach(b),this.h()},h(){m(l,"class","grid svelte-4jsriw"),m(e,"class","svelte-4jsriw")},m(a,c){A(a,e,c),f(e,l);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(l,null);s=!0},p(a,[c]){if(c&1){o=ae(a[0]);let i;for(i=0;i<o.length;i+=1){const u=Lt(a,o,i);n[i]?(n[i].p(u,c),B(n[i],1)):(n[i]=Rt(u),n[i].c(),B(n[i],1),n[i].m(l,null))}for(Ze(),i=o.length;i<n.length;i+=1)r(i);xe()}},i(a){if(!s){for(let c=0;c<o.length;c+=1)B(n[c]);s=!0}},o(a){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)U(n[c]);s=!1},d(a){a&&b(e),nt(n,a)}}}function Hs(t,e,l){let s;return L(t,Q,n=>l(0,s=n)),[s,(n,r,a)=>ks(n,r,a.detail)]}class Ws extends ye{constructor(e){super(),Ce(this,e,Hs,Us,we,{})}}function Fs(t){let e,l,s,o,n,r,a,c,i,u,S,d,g,h,w,E,I,D,W,q,me,G,ee,he,$,O,te,H,oe,ge,X,Fe,at,Je,rt,ot,ce,It,ct,Y,qe,it,Ye,ut,ze,ft,ie,z;return ie=new Ws({}),{c(){e=p("section"),l=p("div"),s=p("div"),o=p("img"),r=y(),a=p("span"),c=M(t[0]),i=y(),u=p("img"),d=y(),g=p("span"),h=M(t[1]),w=y(),E=p("hr"),I=M(`
				20`),D=y(),W=p("img"),me=y(),G=p("span"),ee=M(t[2]),he=y(),$=p("hr"),O=M(`
				10`),te=y(),H=p("img"),ge=y(),X=p("span"),Fe=M(t[3]),at=y(),Je=p("hr"),rt=M(`
				10`),ot=y(),ce=p("img"),ct=y(),Y=p("span"),qe=M(t[4]),it=y(),Ye=p("hr"),ut=y(),ze=M(t[1]),ft=y(),Oe(ie.$$.fragment),this.h()},l(j){e=_(j,"SECTION",{class:!0});var F=P(e);l=_(F,"DIV",{class:!0});var Ke=P(l);s=_(Ke,"DIV",{class:!0});var T=P(s);o=_(T,"IMG",{alt:!0,src:!0,class:!0}),r=C(T),a=_(T,"SPAN",{class:!0});var Pt=P(a);c=R(Pt,t[0]),Pt.forEach(b),i=C(T),u=_(T,"IMG",{alt:!0,src:!0,class:!0}),d=C(T),g=_(T,"SPAN",{class:!0});var Ne=P(g);h=R(Ne,t[1]),w=C(Ne),E=_(Ne,"HR",{class:!0}),I=R(Ne,`
				20`),Ne.forEach(b),D=C(T),W=_(T,"IMG",{alt:!0,src:!0,class:!0}),me=C(T),G=_(T,"SPAN",{class:!0});var Ie=P(G);ee=R(Ie,t[2]),he=C(Ie),$=_(Ie,"HR",{class:!0}),O=R(Ie,`
				10`),Ie.forEach(b),te=C(T),H=_(T,"IMG",{alt:!0,src:!0,class:!0}),ge=C(T),X=_(T,"SPAN",{class:!0});var Pe=P(X);Fe=R(Pe,t[3]),at=C(Pe),Je=_(Pe,"HR",{class:!0}),rt=R(Pe,`
				10`),Pe.forEach(b),ot=C(T),ce=_(T,"IMG",{alt:!0,src:!0,class:!0}),ct=C(T),Y=_(T,"SPAN",{class:!0});var pe=P(Y);qe=R(pe,t[4]),it=C(pe),Ye=_(pe,"HR",{class:!0}),ut=C(pe),ze=R(pe,t[1]),pe.forEach(b),T.forEach(b),ft=C(Ke),$e(ie.$$.fragment,Ke),Ke.forEach(b),F.forEach(b),this.h()},h(){m(o,"alt","available checks"),_e(o.src,n=le+"/ap-icon-large.png")||m(o,"src",n),m(o,"class","svelte-1o5v9kj"),m(a,"class","svelte-1o5v9kj"),m(u,"alt","placed bombs"),_e(u.src,S=le+"/bomb-large.png")||m(u,"src",S),m(u,"class","svelte-1o5v9kj"),m(E,"class","svelte-1o5v9kj"),m(g,"class","svelte-1o5v9kj"),m(W,"alt","map height"),_e(W.src,q=le+"/up-down-arrow-big.png")||m(W,"src",q),m(W,"class","svelte-1o5v9kj"),m($,"class","svelte-1o5v9kj"),m(G,"class","svelte-1o5v9kj"),m(H,"alt","map width"),_e(H.src,oe=le+"/left-right-arrow-big.png")||m(H,"src",oe),m(H,"class","svelte-1o5v9kj"),m(Je,"class","svelte-1o5v9kj"),m(X,"class","svelte-1o5v9kj"),m(ce,"alt","flagged spots"),_e(ce.src,It=le+"/heavy-rock-big.png")||m(ce,"src",It),m(ce,"class","svelte-1o5v9kj"),m(Ye,"class","svelte-1o5v9kj"),m(Y,"class","svelte-1o5v9kj"),m(s,"class","game-status svelte-1o5v9kj"),m(l,"class","island svelte-1o5v9kj"),m(e,"class","svelte-1o5v9kj")},m(j,F){A(j,e,F),f(e,l),f(l,s),f(s,o),f(s,r),f(s,a),f(a,c),f(s,i),f(s,u),f(s,d),f(s,g),f(g,h),f(g,w),f(g,E),f(g,I),f(s,D),f(s,W),f(s,me),f(s,G),f(G,ee),f(G,he),f(G,$),f(G,O),f(s,te),f(s,H),f(s,ge),f(s,X),f(X,Fe),f(X,at),f(X,Je),f(X,rt),f(s,ot),f(s,ce),f(s,ct),f(s,Y),f(Y,qe),f(Y,it),f(Y,Ye),f(Y,ut),f(Y,ze),f(l,ft),Ae(ie,l,null),z=!0},p(j,[F]){(!z||F&1)&&K(c,j[0]),(!z||F&2)&&K(h,j[1]),(!z||F&4)&&K(ee,j[2]),(!z||F&8)&&K(Fe,j[3]),(!z||F&16)&&K(qe,j[4]),(!z||F&2)&&K(ze,j[1])},i(j){z||(B(ie.$$.fragment,j),z=!0)},o(j){U(ie.$$.fragment,j),z=!1},d(j){j&&b(e),je(ie)}}}function Js(t,e,l){let s,o,n,r,a,c,i,u,S;return L(t,ue,d=>l(5,s=d)),L(t,Ge,d=>l(6,o=d)),L(t,Re,d=>l(7,n=d)),L(t,Me,d=>l(8,r=d)),L(t,Qt,d=>l(0,a=d)),L(t,lt,d=>l(1,c=d)),L(t,fe,d=>l(2,i=d)),L(t,de,d=>l(3,u=d)),L(t,_s,d=>l(4,S=d)),t.$$.update=()=>{t.$$.dirty&480&&tt()},[a,c,i,u,S,s,o,n,r]}class qs extends ye{constructor(e){super(),Ce(this,e,Js,Fs,we,{})}}function Gt(t,e,l){const s=t.slice();return s[7]=e[l],s}function Ut(t,e,l){const s=t.slice();return s[10]=e[l].text,s[11]=e[l].type,s}function Ys(t){let e,l=t[7]+"",s,o,n;return{c(){e=p("p"),s=M(l),o=y()},l(r){e=_(r,"P",{});var a=P(e);s=R(a,l),o=C(a),a.forEach(b)},m(r,a){A(r,e,a),f(e,s),f(e,o)},p(r,a){a&4&&l!==(l=r[7]+"")&&K(s,l)},i(r){n||Ee(()=>{n=wt(e,He,{y:1200,duration:1e3}),n.start()})},o:V,d(r){r&&b(e)}}}function zs(t){let e,l=t[7].text+"",s,o,n;return{c(){e=p("p"),s=M(l),o=y()},l(r){e=_(r,"P",{});var a=P(e);s=R(a,l),o=C(a),a.forEach(b)},m(r,a){A(r,e,a),f(e,s),f(e,o)},p(r,a){a&4&&l!==(l=r[7].text+"")&&K(s,l)},i(r){n||Ee(()=>{n=wt(e,He,{y:1200,duration:1e3}),n.start()})},o:V,d(r){r&&b(e)}}}function Ks(t){var o;let e,l=ae(((o=t[7])==null?void 0:o.messageParts)&&t[7].messageParts),s=[];for(let n=0;n<l.length;n+=1)s[n]=Ht(Ut(t,l,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=ve()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=ve()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);A(n,e,r)},p(n,r){var a;if(r&4){l=ae(((a=n[7])==null?void 0:a.messageParts)&&n[7].messageParts);let c;for(c=0;c<l.length;c+=1){const i=Ut(n,l,c);s[c]?(s[c].p(i,r),B(s[c],1)):(s[c]=Ht(i),s[c].c(),B(s[c],1),s[c].m(e.parentNode,e))}for(;c<s.length;c+=1)s[c].d(1);s.length=l.length}},i(n){for(let r=0;r<l.length;r+=1)B(s[r])},o:V,d(n){n&&b(e),nt(s,n)}}}function Ht(t){let e,l=t[10]+"",s,o,n;return{c(){e=p("p"),s=M(l),o=y()},l(r){e=_(r,"P",{});var a=P(e);s=R(a,l),o=C(a),a.forEach(b)},m(r,a){A(r,e,a),f(e,s),f(e,o)},p(r,a){a&4&&l!==(l=r[10]+"")&&K(s,l)},i(r){n||Ee(()=>{n=wt(e,He,{y:1200,duration:1e3}),n.start()})},o:V,d(r){r&&b(e)}}}function Wt(t){let e,l,s;function o(a,c){return c&4&&(e=null),c&4&&(l=null),e==null&&(e=!!Object.hasOwn(a[7],"messageParts")),e?Ks:(l==null&&(l=!!Object.hasOwn(a[7],"text")),l?zs:Ys)}let n=o(t,-1),r=n(t);return{c(){r.c(),s=ve()},l(a){r.l(a),s=ve()},m(a,c){r.m(a,c),A(a,s,c)},p(a,c){n===(n=o(a,c))&&r?r.p(a,c):(r.d(1),r=n(a),r&&(r.c(),B(r,1),r.m(s.parentNode,s)))},i(a){B(r)},o:V,d(a){a&&b(s),r.d(a)}}}function Vs(t){let e,l,s=`<img alt="close-console" src="${le+"/cross.png"}"/>`,o,n,r,a,c,i,u,S,d=ae(t[2]),g=[];for(let h=0;h<d.length;h+=1)g[h]=Wt(Gt(t,d,h));return{c(){e=p("section"),l=p("button"),l.innerHTML=s,o=y(),n=p("span");for(let h=0;h<g.length;h+=1)g[h].c();r=y(),a=p("input"),this.h()},l(h){e=_(h,"SECTION",{class:!0});var w=P(e);l=_(w,"BUTTON",{class:!0,"data-svelte-h":!0}),be(l)!=="svelte-4nwcgv"&&(l.innerHTML=s),o=C(w),n=_(w,"SPAN",{class:!0});var E=P(n);for(let I=0;I<g.length;I+=1)g[I].l(E);E.forEach(b),r=C(w),a=_(w,"INPUT",{class:!0,type:!0,placeholder:!0}),w.forEach(b),this.h()},h(){m(l,"class","close-console svelte-l5ir4e"),m(n,"class","console svelte-l5ir4e"),m(a,"class","console-input svelte-l5ir4e"),m(a,"type","text"),m(a,"placeholder","Message or !command to send to server"),m(e,"class","svelte-l5ir4e")},m(h,w){A(h,e,w),f(e,l),f(e,o),f(e,n);for(let E=0;E<g.length;E+=1)g[E]&&g[E].m(n,null);t[5](n),f(e,r),f(e,a),ne(a,t[1]),i=!0,u||(S=[x(l,"click",t[4]),x(a,"input",t[6]),x(a,"keydown",t[3])],u=!0)},p(h,[w]){if(w&4){d=ae(h[2]);let E;for(E=0;E<d.length;E+=1){const I=Gt(h,d,E);g[E]?(g[E].p(I,w),B(g[E],1)):(g[E]=Wt(I),g[E].c(),B(g[E],1),g[E].m(n,null))}for(;E<g.length;E+=1)g[E].d(1);g.length=d.length}w&2&&a.value!==h[1]&&ne(a,h[1])},i(h){if(!i){for(let w=0;w<d.length;w+=1)B(g[w]);h&&Ee(()=>{i&&(c||(c=ke(e,$t,{duration:1e3,easing:st,x:-400},!0)),c.run(1))}),i=!0}},o(h){h&&(c||(c=ke(e,$t,{duration:1e3,easing:st,x:-400},!1)),c.run(0)),i=!1},d(h){h&&b(e),nt(g,h),t[5](null),h&&c&&c.end(),u=!1,qt(S)}}}function Qs(t,e,l){let s;L(t,J,u=>l(2,s=u));let o=null,n="";rs(()=>{o==null||o.scroll({top:o.scrollHeight,behavior:"smooth"})});function r(u){u.key==="Enter"&&Is(n)}const a=()=>vt.set(!1);function c(u){os[u?"unshift":"push"](()=>{o=u,l(0,o)})}function i(){n=this.value,l(1,n)}return[o,n,s,r,a,c,i]}class Xs extends ye{constructor(e){super(),Ce(this,e,Qs,Vs,we,{})}}function Ft(t){let e,l;return e=new Xs({}),{c(){Oe(e.$$.fragment)},l(s){$e(e.$$.fragment,s)},m(s,o){Ae(e,s,o),l=!0},i(s){l||(B(e.$$.fragment,s),l=!0)},o(s){U(e.$$.fragment,s),l=!1},d(s){je(e,s)}}}function Jt(t){let e,l=`<img alt="console" src="${le+"/map.png"}" class="svelte-yfqrgf"/>`,s,o,n,r;return{c(){e=p("button"),e.innerHTML=l,this.h()},l(a){e=_(a,"BUTTON",{class:!0,"data-svelte-h":!0}),be(e)!=="svelte-4fllls"&&(e.innerHTML=l),this.h()},h(){m(e,"class",pt("floating-chat__open-chat--closed")+" svelte-yfqrgf")},m(a,c){A(a,e,c),o=!0,n||(r=x(e,"click",t[1]),n=!0)},i(a){o||(a&&Ee(()=>{o&&(s||(s=ke(e,He,{duration:1e3,easing:st},!0)),s.run(1))}),o=!0)},o(a){a&&(s||(s=ke(e,He,{duration:1e3,easing:st},!1)),s.run(0)),o=!1},d(a){a&&b(e),a&&s&&s.end(),n=!1,r()}}}function Zs(t){let e,l,s,o,n,r,a,c,i;l=new js({});let u=t[0]&&Ft();r=new qs({});let S=!t[0]&&Jt(t);return{c(){e=p("main"),Oe(l.$$.fragment),s=y(),o=p("div"),u&&u.c(),n=y(),Oe(r.$$.fragment),c=y(),S&&S.c(),this.h()},l(d){e=_(d,"MAIN",{class:!0});var g=P(e);$e(l.$$.fragment,g),s=C(g),o=_(g,"DIV",{class:!0});var h=P(o);u&&u.l(h),n=C(h),$e(r.$$.fragment,h),h.forEach(b),c=C(g),S&&S.l(g),g.forEach(b),this.h()},h(){m(o,"class","content-area svelte-yfqrgf"),m(e,"class","svelte-yfqrgf")},m(d,g){A(d,e,g),Ae(l,e,null),f(e,s),f(e,o),u&&u.m(o,null),f(o,n),Ae(r,o,null),f(e,c),S&&S.m(e,null),i=!0},p(d,[g]){d[0]?u?g&1&&B(u,1):(u=Ft(),u.c(),B(u,1),u.m(o,n)):u&&(Ze(),U(u,1,1,()=>{u=null}),xe()),d[0]?S&&(Ze(),U(S,1,1,()=>{S=null}),xe()):S?g&1&&B(S,1):(S=Jt(d),S.c(),B(S,1),S.m(e,null))},i(d){i||(B(l.$$.fragment,d),B(u),B(r.$$.fragment,d),d&&Ee(()=>{i&&(a||(a=ke(o,At,{},!0)),a.run(1))}),B(S),i=!0)},o(d){U(l.$$.fragment,d),U(u),U(r.$$.fragment,d),d&&(a||(a=ke(o,At,{},!1)),a.run(0)),U(S),i=!1},d(d){d&&b(e),je(l),u&&u.d(),je(r),d&&a&&a.end(),S&&S.d()}}}function xs(t,e,l){let s;return L(t,vt,n=>l(0,s=n)),cs(()=>{document.addEventListener("contextmenu",n=>n.preventDefault())}),[s,()=>vt.set(!0)]}class an extends ye{constructor(e){super(),Ce(this,e,xs,Zs,we,{})}}export{an as component};
